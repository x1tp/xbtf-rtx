# Economy Concept

- Goals
  - Create a living supply/demand simulation driven by production cycles
  - Support race-specific resource chains and regional scarcity
  - Enable emergent gameplay: trade runs, shortages, booms, pirate disruption

- Entities
  - Wares: primary, food, intermediates, hi-tech, weapons, shields, missiles
  - Stations: producers and consumers with production recipes
  - Fleets: NPC and player ships executing logistics (buy, sell, deliver)
  - Sectors: nodes with local inventories and price signals

- Ware Categories
  - Primary: Energy Cells, Ore, Silicon Wafers, Teladianium, Warheads, Delexian Wheat
  - Food: Meatsteak Cahoonas, BoFu, Soja Husk, Rastar Oil, Nostrop Oil, Plankton, Scruffin Fruits, Stott Spices, Maja Snails, Sunrise Flower, Swamp Plants
  - Intermediates: Crystals, Quantum Tubes, Microchips, Computer Components, Cloth Rimes, Majaglit
  - End-products: Weapons (IRE/PAC/HEPT), Shields (1/5/25 MW), Missiles (Mosquito/Wasp/Dragonfly/Silkworm/Hornet), Space Fuel, Spaceweed

- Production Model
  - Each station defines: product ware, input wares, cycle time, batch size, storage caps
  - Cycle runs when inputs available; outputs added to inventory; inputs consumed
  - Race variants swap food/intermediate inputs per known recipes

- Prices and Signals
  - Base price per ware; dynamic modifier from local stock vs target stock
  - Price elasticity: steeper for end-products, moderate for intermediates, low for primaries
  - Buy threshold: stations buy inputs when local stock < reorder level
  - Sell threshold: stations sell outputs when local stock > reserve level

- Logistics and Flow
  - Market orders: generated by stations (buy inputs, sell outputs)
  - Order book per sector; orders matched to fleets via simple heuristic
  - NPC traders: prioritize highest margin routes within range and capacity
  - Player traders: same system, route planning UI reads order book

- Sectors and Connectivity
  - Graph of sectors with gates (edges) and travel times
  - Transport cost = distance factor × cargo volume × hazard factor
  - Hazards alter effective throughput; piracy increases loss rate and insurance premium

- Scarcity and Events
  - Global/sector events: shortages (e.g., Crystal drought), surpluses, embargo, war, pirate raids
  - Event impacts: temporarily adjust production rates, demand multipliers, risk

- Docks and Black Market
  - Equipment docks consume money, not inputs; act as sinks for end-products at capped rates
  - Pirate bases offer buy/sell for contraband with price premiums and risk modifiers

- Player Interaction
  - Build stations: add producers/consumers, configure price ranges and reserved stock
  - Trade automation: station-owned freighters and player scripts consume order book
  - Missions: fulfill bulk contracts, emergency deliveries, blockade running

- Balancing Levers
  - Cycle times, batch sizes, storage caps, reorder levels, price bands
  - NPC fleet density, route efficiency, event frequency, hazard strength

- Simulation Tick
  - Fixed tick (e.g., 10s): update station cycles, prices, generate orders
  - Every tick: match orders, move cargo, apply travel time, resolve losses
  - Price recompute: P = base × f(stock/target, recent_flow, event_mod)

- Data Structures (suggested)
  - Ware: id, basePrice, category, volume
  - Recipe: productId, inputs[{wareId, qty}], cycleTime, batchSize
  - Station: id, recipeId, inventory{wareId→qty}, caps, reorder/reserve, race, sectorId
  - Sector: id, neighbors, risk, orderBook
  - Order: type(buy/sell), stationId, wareId, qty, limitPrice, ttl
  - Fleet: id, capacity, speed, homeSector, behavior

- Algorithm Sketch
  - For each station: if inputs ≥ recipe requirements then run cycle; update inventories
  - For each station: ensure orders exist to acquire inputs up to reorder target; list outputs if above reserve
  - Price per ware per sector: base × (1 + k × shortageRatio − m × surplusRatio) clamped to bands
  - Route selection: score = (sellPrice − buyPrice − transportCost) × min(qty, capacity)

- Persistence
  - Save: station inventories, orders, sector prices, fleet assignments, event state
  - Load: rebuild order books and recompute live prices from inventories

- Roadmap
  - Phase 1: static recipes and tick-based production in one sector; manual trading
  - Phase 2: dynamic prices, multi-sector logistics, NPC traders
  - Phase 3: events, hazards, contraband, equipment dock sinks
  - Phase 4: player automation, station building, balance polish

